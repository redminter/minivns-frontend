<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>

</head>
    <div class="body-container_new">
      <div class="left-part">
        <div class="statistics-plus-expired">
          <div class="group-statistics">
            <div class="group-number h3 glass">{{group}}</div>
            <div class="statistics glass">
              <div class="h3">{{doneTasksPercentage}}%</div>
              <div class="h5">Виконано!</div>
              <div *ngIf="doneTasksPercentage>=97; else elseBlock" class="back-color" style="border-radius:30px" [style.height.%]="doneTasksPercentage"></div>
              <ng-template #elseBlock>
                <div class="back-color" [style.height.%]="doneTasksPercentage"></div>
              </ng-template>
            </div>
          </div>
          <div class="expire-container">
            <span class="h5">Скоро спливає</span>
            <div class="tasks-container">
              <ng-template>
              <div *ngIF="sortedTasks.length==0; else elseBlock" class="task-card-container">
                <div class="task-card-dashboard glass">
                  <div class="name-time">
                    <span class="task-name h6">Немає завдань</span>
                  </div>
                </div>
              </div>
              </ng-template>
              <div *ngFor="let task of sortedTasks" class="task-card-container">
                <div class="task-card-dashboard glass">
                  <div class="name-time">
                    <span class="task-name h6">{{task.title}}</span>
                    <div class="subject-time body5">
                      <span class="subject ">{{task.subject_id.title}}</span>
                      <span class="deadline">{{getDate(task)}}</span>
                    </div>
                  </div>
                  <div class="schedule-card-button-container">
                    <a *ngIf="task.link && task.link.trim() != ''; else elseBlock1" href="{{task.link}}"><div class="schedule-card-button card-button glass">ВНС</div></a>
                    <ng-template #elseBlock1>
                      <div class=" schedule-card-button card-button glass">ВНС</div>
                    </ng-template>
                    <a *ngIf="task.link && task.link.trim() != ''; else elseBlock2" href="{{task.metoda_link}}"><div class="schedule-card-button card-button glass">МЕТОДИЧКА</div></a>
                    <ng-template #elseBlock2>
                      <div class="schedule-card-button card-button glass">МЕТОДИЧКА</div>
                    </ng-template>
                  </div>
                </div>
                <div class="task-deadline-dashboard glass">
                  <span class="days-amount h4">{{diffindays(task)}}</span>
                  <span class="days body5">дні</span>
                </div>
              </div>
              <div routerLink="../../../users/{{user_id}}/tasks"class="task-all-button glass body4">
                <div>Усі завдання</div>
                <img src="../assets/resources/icons/arrow-right.svg" alt="Arrow Right">
              </div>
            </div>
          </div>
        </div>
        <div class="success">
          <span class="h5">Успішність</span>
          <div *ngFor="let subject of arrayOfArrays; let i=index" class="success-item body4">
            <div class="name-mark">
              <div routerLink="../../../users/{{user_id}}/subjects/{{subject[0].subject_id.id}}/tasks" class="name">{{subject[0].subject_id.title}}</div>
              <div class="mark">{{totalMarksPerArray[i]}}</div>
            </div>
            <div class="line"></div>
          </div>
          <div routerLink="../../../users/{{user_id}}/marks" class="all-marks body4">Усі оцінки</div>
        </div>
      </div>
      <div class="today-schedule">
        <span class="h5">{{getDateNow()}}</span>
        <div class="schedule-cards-container-plus-button">
          <div class="schedule-cards-container-dashboard">
            <div *ngFor="let subject of schedules" class="schedule-item-dashboard">
              <div class="schedule-card glass">
                <div class="name-time">
                  <span class="discipline-name h6">{{subject.subject_id.title}}</span>
                  <div class="teacher-time">
                    <span class="teacher body5">{{subject.teacher}}</span>
                    <div class="para-number-time body5">
                      <span class="para-number">{{subject.number}} пара</span>
                      <span class="time">{{getTimeByNumber(subject.number)}}</span>
                    </div>
                  </div>
                </div>
                <div class="schedule-card-button-container">
                  <a *ngIf="subject.subject_id.link && subject.subject_id.link.trim() != ''; else elseBlock1" href="{{subject.subject_id.link}}"><div class="schedule-card-button card-button glass">ВНС</div></a>
                  <ng-template #elseBlock1>
                    <div class="schedule-card-button card-button glass">ВНС</div>
                  </ng-template>
                  <a *ngIf="subject.subject_id.link && subject.subject_id.link.trim() != ''; else elseBlock2" href="{{subject.link}}"><div class="schedule-card-button card-button glass">{{subject.type_of_lesson}}</div></a>
                  <ng-template #elseBlock2>
                    <div class="schedule-card-button card-button glass">{{subject.type_of_lesson}}</div>
                  </ng-template></div>
              </div>
              <div routerLink="../../../users/{{user_id}}/subjects/{{subject.subject_id.id}}/tasks" class="schedule-button-dashboard glass">
                <img src="../assets/resources/icons/arrow-right.svg" alt="Arrow Right">
              </div>
            </div>
          </div>
          <div routerLink="../../../subjects" class="schedule-all-button glass h6">
            <span>Усі предмети</span>
            <img src="../assets/resources/icons/arrow-right.svg" alt="Arrow Right">
          </div>
        </div>
      </div>
    </div>
</html>
